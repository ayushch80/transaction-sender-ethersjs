<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Transaction Sender - @ayushch80</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css?h=ecfbe1b8e10fde93119622558e31cc37">
    <link rel="stylesheet" href="assets/css/Akaya%20Kanadaka.css?h=a68cf140434da09bb04658c60c9aad16">
    <link rel="stylesheet" href="assets/css/Aldrich.css?h=29c1b05ba9c40ef0346b7e1bddf9dafd">
    <link rel="stylesheet" href="assets/css/Navbar-Centered-Brand-Dark.css?h=befd8a398792e305b7ffd4a176b5b585">
    <link rel="stylesheet" href="assets/css/styles.css?h=d41d8cd98f00b204e9800998ecf8427e">
</head>

<body>
    <nav class="navbar navbar-dark navbar-expand-md bg-dark py-3">
        <div class="container"><a class="navbar-brand d-flex align-items-center" href="#"><span style="font-family: Aldrich, sans-serif;">@ayushch80</span></a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-6"></button>
            <div class="collapse navbar-collapse flex-grow-0 order-md-first" id="navcol-6">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                </ul>
            </div>
            <div class="d-none d-md-block"></div>
        </div>
    </nav>
    <div class="container">
        <div class="row">
            <div class="col-md-12" style="text-align: center;"><strong style="width: 0px;font-size: 30px;font-family: 'Akaya Kanadaka', serif;text-align: center;transform: translate(20px) scale(0) skew(85deg);filter: brightness(0%) contrast(200%) invert(0%) saturate(13%) sepia(100%);--bs-primary: #1b5ebf;--bs-primary-rgb: 27,94,191;" id="userAdd">Connect Your Wallet to Continue ...</strong></div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-12"></div>
        </div>
    </div><br><br>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <form id="uData" method="POST">
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">Receivers Address</span>
                        <input type="text" class="form-control" placeholder="Enter Receivers Address" aria-label="rAdd" aria-describedby="basic-addon1" id="add">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">Amount (in ETH)</span>
                        <input type="text" class="form-control" placeholder="Enter Amount" aria-label="rAdd" aria-describedby="basic-addon1" id="amo">
                    </div>
                    <div class="col-12">
                        <button name="data" type="button" class="btn btn-primary" id="btn_click">Submit Transaction</button>
                    </div>
                </form>
                <br><br><div class="col-md-12" style="text-align: center;"><strong style="width: 0px;font-size: 20px;font-family: 'Aldrich', serif;text-align: center;transform: translate(20px) scale(0) skew(85deg);filter: brightness(0%) contrast(200%) invert(0%) saturate(13%) sepia(100%);--bs-primary: #1b5ebf;--bs-primary-rgb: 27,94,191;" id="_hash"></strong></div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" crossorigin="anonymous"></script>
    <script type="module">
      const provider = new ethers.providers.Web3Provider(window.ethereum, "any")
      await provider.send("eth_requestAccounts", []);
      const signer = provider.getSigner()
      var userAddress = await signer.getAddress();
      document.getElementById("userAdd").innerText = "Your Address is " + userAddress;
      provider.on("network", (newNetwork, oldNetwork) => {
        if (oldNetwork) {
            window.location.reload();
        }
      });
      document.getElementById("btn_click").addEventListener("click", getData);
      async function getData() {
        const bData = document.getElementById("uData");
        const rAdd = bData.elements.namedItem("add").value;
        const rAmo = bData.elements.namedItem("amo").value;
        let txn = signer.sendTransaction({ to: rAdd, value: ethers.utils.parseEther(rAmo)});
        let tx = await txn;
        document.getElementById("_hash").html = `<p>Transaction Hash : ${tx.hash}</p>`;
        let receipt = await tx.wait();
        document.getElementById("_hash").innerText = "Transaction is confirmed at hash " + tx.hash;
        }
    </script>
</body>
</html>
